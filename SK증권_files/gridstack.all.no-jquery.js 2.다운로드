!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("jQuery")):"function"==typeof define&&define.amd?define(["jQuery"],e):"object"==typeof exports?exports.GridStack=e(require("jQuery")):t.GridStack=e(t.jQuery)}(window,(function(t){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(s,o,function(e){return t[e]}.bind(null,o));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=5)}([function(t,e,i){"use strict";
// utils.ts 2.0.0-dev @preserve
Object.defineProperty(e,"__esModule",{value:!0}),e.obsolete=function(t,e,i,s,o){let n=(...n)=>(console.warn("gridstack.js: Function `"+i+"` is deprecated in "+o+" and has been replaced with `"+s+"`. It will be **completely** removed in v1.0"),e.apply(t,n));return n.prototype=e.prototype,n},e.obsoleteOpts=function(t,e,i,s){void 0!==t[e]&&(t[i]=t[e],console.warn("gridstack.js: Option `"+e+"` is deprecated in "+s+" and has been replaced with `"+i+"`. It will be **completely** removed in v1.0"))},e.obsoleteOptsDel=function(t,e,i,s){void 0!==t[e]&&console.warn("gridstack.js: Option `"+e+"` is deprecated in "+i+s)},e.obsoleteAttr=function(t,e,i,s){let o=t.getAttribute(e);null!==o&&(t.setAttribute(i,o),console.warn("gridstack.js: attribute `"+e+"`="+o+" is deprecated on this object in "+s+" and has been replaced with `"+i+"`. It will be **completely** removed in v1.0"))};class s{static isIntercepted(t,e){return!(t.x+t.width<=e.x||e.x+e.width<=t.x||t.y+t.height<=e.y||e.y+e.height<=t.y)}static sort(t,e,i){if(!i){let e=t.map(t=>t.x+t.width);i=Math.max(...e)}return-1===e?t.sort((t,e)=>e.x+e.y*i-(t.x+t.y*i)):t.sort((t,e)=>t.x+t.y*i-(e.x+e.y*i))}static createStylesheet(t,e){let i=document.createElement("style");return i.setAttribute("type","text/css"),i.setAttribute("data-gs-style-id",t),i.styleSheet?i.styleSheet.cssText="":i.appendChild(document.createTextNode("")),e?e.insertBefore(i,e.firstChild):(e=document.getElementsByTagName("head")[0]).appendChild(i),i.sheet}static removeStylesheet(t){let e=document.querySelector("STYLE[data-gs-style-id="+t+"]");e&&e.parentNode&&e.parentNode.removeChild(e)}static addCSSRule(t,e,i){"function"==typeof t.addRule?t.addRule(e,i):"function"==typeof t.insertRule&&t.insertRule(`${e}{${i}}`)}static toBool(t){return"boolean"==typeof t?t:"string"==typeof t?!(""===(t=t.toLowerCase())||"no"===t||"false"===t||"0"===t):Boolean(t)}static toNumber(t){return null===t||0===t.length?null:Number(t)}static parseHeight(t){let e,i="px";if("string"==typeof t){let s=t.match(/^(-[0-9]+\.[0-9]+|[0-9]*\.[0-9]+|-[0-9]+|[0-9]+)(px|em|rem|vh|vw|%)?$/);if(!s)throw new Error("Invalid height");i=s[2]||"px",e=parseFloat(s[1])}else e=t;return{height:e,unit:i}}static defaults(t,...e){return e.forEach((function(e){for(let i in e)!Object.prototype.hasOwnProperty.call(e,i)||null!==t[i]&&void 0!==t[i]||(t[i]=e[i])})),t}static clone(t){return Object.assign({},t)}static closestByClass(t,e){return(t=t.parentElement)?t.classList.contains(e)?t:s.closestByClass(t,e):null}static throttle(t,e){let i=!1;return function(...s){i||(t.apply(this,s),i=!0,setTimeout((function(){i=!1}),e))}}static removePositioningStyles(t){let e=t.style;e.position&&e.removeProperty("position"),e.left&&e.removeProperty("left"),e.top&&e.removeProperty("top"),e.width&&e.removeProperty("width"),e.height&&e.removeProperty("height")}static getScrollParent(t){let e;return e=null===t?null:t.scrollHeight>t.clientHeight?t:this.getScrollParent(t.parentElement),e}static updateScrollPosition(t,e,i){let s=t.getBoundingClientRect(),o=window.innerHeight||document.documentElement.clientHeight;if(s.top<0||s.bottom>o){let n=s.bottom-o,r=s.top,h=this.getScrollParent(t);if(null!==h){let a=h.scrollTop;s.top<0&&i<0?t.offsetHeight>o?h.scrollTop+=i:h.scrollTop+=Math.abs(r)>Math.abs(i)?i:r:i>0&&(t.offsetHeight>o?h.scrollTop+=i:h.scrollTop+=n>i?i:n),e.top+=h.scrollTop-a}}}}e.Utils=s},function(t,e,i){"use strict";
// gridstack-dd.ts 2.0.0-dev @preserve
Object.defineProperty(e,"__esModule",{value:!0});class s{constructor(t){this.grid=t}static registerPlugin(t){s.registeredPlugins.push(t)}static get(){return s.registeredPlugins[0]||s}resizable(t,e,i,s){return this}draggable(t,e,i,s){return this}dragIn(t,e){return this}isDraggable(t){return!1}droppable(t,e,i,s){return this}isDroppable(t){return!1}on(t,e,i){return this}off(t,e){return this}}s.registeredPlugins=[],e.GridStackDD=s},function(t,e,i){"use strict";
// gridstack-engine.ts 2.0.0-dev @preserve
Object.defineProperty(e,"__esModule",{value:!0});const s=i(0);class o{constructor(t=12,e,i=!1,n=0,r=[]){this.addedNodes=[],this.removedNodes=[],this.getGridHeight=s.obsolete(this,o.prototype.getRow,"getGridHeight","getRow","v1.0.0"),this.column=t,this.onchange=e,this._float=i,this.maxRow=n,this.nodes=r}batchUpdate(){return this.batchMode||(this.batchMode=!0,this._prevFloat=this._float,this._float=!0),this}commit(){return this.batchMode?(this.batchMode=!1,this._float=this._prevFloat,delete this._prevFloat,this._packNodes(),this._notify(),this):this}_fixCollisions(t){this._sortNodes(-1);let e=t,i=Boolean(this.nodes.find(t=>t.locked));for(this.float||i||(e={x:0,y:t.y,width:this.column,height:t.height});;){let i,o=this.nodes.find(i=>i!==t&&s.Utils.isIntercepted(i,e),{node:t,nn:e});if(!o)return this;if(i=o.locked?this.moveNode(t,t.x,o.y+o.height,t.width,t.height,!0):this.moveNode(o,o.x,t.y+t.height,o.width,o.height,!0),!i)return this}}isAreaEmpty(t,e,i,o){let n={x:t||0,y:e||0,width:i||1,height:o||1};return!this.nodes.find(t=>s.Utils.isIntercepted(t,n))}compact(){if(0===this.nodes.length)return this;this.batchUpdate(),this._sortNodes();let t=this.nodes;return this.nodes=[],t.forEach(t=>{t.noMove||t.locked||(t.autoPosition=!0),this.addNode(t,!1),t._dirty=!0}),this.commit(),this}set float(t){this._float!==t&&(this._float=t||!1,t||(this._packNodes(),this._notify()))}get float(){return this._float||!1}_sortNodes(t){return this.nodes=s.Utils.sort(this.nodes,t,this.column),this}_packNodes(){return this._sortNodes(),this.float?this.nodes.forEach((t,e)=>{if(t._updating||void 0===t._packY||t.y===t._packY)return this;let i=t.y;for(;i>=t._packY;){let o={x:t.x,y:i,width:t.width,height:t.height};this.nodes.slice(0,e).find(t=>s.Utils.isIntercepted(o,t),{n:t,newY:i})||(t._dirty=!0,t.y=i),--i}}):this.nodes.forEach((t,e)=>{if(t.locked)return this;for(;t.y>0;){let i=t.y-1,o=0===e,n={x:t.x,y:i,width:t.width,height:t.height};if(e>0){o=void 0===this.nodes.slice(0,e).find(t=>s.Utils.isIntercepted(n,t),{n:t,newY:i})}if(!o)break;t._dirty=t.y!==i,t.y=i}}),this}prepareNode(t,e){void 0!==(t=t||{}).x&&void 0!==t.y&&null!==t.x&&null!==t.y||(t.autoPosition=!0);let i={width:1,height:1,x:0,y:0};return(t=s.Utils.defaults(t,i)).autoPosition=t.autoPosition||!1,t.noResize=t.noResize||!1,t.noMove=t.noMove||!1,Number.isNaN(t.x)&&(t.x=i.x,t.autoPosition=!0),Number.isNaN(t.y)&&(t.y=i.y,t.autoPosition=!0),Number.isNaN(t.width)&&(t.width=i.width),Number.isNaN(t.height)&&(t.height=i.height),t.maxWidth&&(t.width=Math.min(t.width,t.maxWidth)),t.maxHeight&&(t.height=Math.min(t.height,t.maxHeight)),t.minWidth&&(t.width=Math.max(t.width,t.minWidth)),t.minHeight&&(t.height=Math.max(t.height,t.minHeight)),t.width>this.column?t.width=this.column:t.width<1&&(t.width=1),this.maxRow&&t.height>this.maxRow?t.height=this.maxRow:t.height<1&&(t.height=1),t.x<0&&(t.x=0),t.y<0&&(t.y=0),t.x+t.width>this.column&&(e?t.width=this.column-t.x:t.x=this.column-t.width),this.maxRow&&t.y+t.height>this.maxRow&&(e?t.height=this.maxRow-t.y:t.y=this.maxRow-t.height),t}getDirtyNodes(t){if(t){let t=[];return this.nodes.forEach(e=>{e._dirty&&(e.y===e._origY&&e.x===e._origX&&e.width===e._origW&&e.height===e._origH?delete e._dirty:t.push(e))}),t}return this.nodes.filter(t=>t._dirty)}_notify(t,e=!0){if(this.batchMode)return this;let i=(t=void 0===t?[]:Array.isArray(t)?t:[t]).concat(this.getDirtyNodes());return this.onchange&&this.onchange(i,e),this}cleanNodes(){return this.batchMode||this.nodes.forEach(t=>{delete t._dirty}),this}addNode(t,e=!1){if((t=this.prepareNode(t))._id=t._id||o._idSeq++,t.autoPosition){this._sortNodes();for(let e=0;;++e){let i=e%this.column,o=Math.floor(e/this.column);if(i+t.width>this.column)continue;let n={x:i,y:o,width:t.width,height:t.height};if(!this.nodes.find(t=>s.Utils.isIntercepted(n,t),{x:i,y:o,node:t})){t.x=i,t.y=o,delete t.autoPosition;break}}}return this.nodes.push(t),e&&this.addedNodes.push(t),this._fixCollisions(t),this._packNodes(),this._notify(),t}removeNode(t,e=!0,i=!1){return i&&this.removedNodes.push(t),t._id=null,this.nodes.splice(this.nodes.findIndex(e=>e===t),1),this.float||this._packNodes(),this._notify(t,e),this}removeAll(t=!0){return delete this._layouts,0===this.nodes.length||(t&&this.nodes.forEach(t=>{t._id=null}),this.removedNodes=this.nodes,this.nodes=[],this._notify(this.removedNodes,t)),this}canMoveNode(t,e,i,n,r){if(!this.isNodeChangedPosition(t,e,i,n,r))return!1;let h,a=Boolean(this.nodes.find(t=>t.locked));if(!this.maxRow&&!a)return!0;let l=new o(this.column,null,this.float,0,this.nodes.map(e=>e===t?(h=s.Utils.clone(e),h):s.Utils.clone(e)));if(!h)return!0;l.moveNode(h,e,i,n,r);let d=!0;return a&&(d=d&&!Boolean(l.nodes.find(t=>t!==h&&Boolean(t.locked)&&Boolean(t._dirty)))),this.maxRow&&(d=d&&l.getRow()<=this.maxRow),d}canBePlacedWithRespectToHeight(t){if(!this.maxRow)return!0;let e=new o(this.column,null,this.float,0,this.nodes.map(t=>s.Utils.clone(t)));return e.addNode(t),e.getRow()<=this.maxRow}isNodeChangedPosition(t,e,i,s,o){return"number"!=typeof e&&(e=t.x),"number"!=typeof i&&(i=t.y),"number"!=typeof s&&(s=t.width),"number"!=typeof o&&(o=t.height),t.maxWidth&&(s=Math.min(s,t.maxWidth)),t.maxHeight&&(o=Math.min(o,t.maxHeight)),t.minWidth&&(s=Math.max(s,t.minWidth)),t.minHeight&&(o=Math.max(o,t.minHeight)),t.x!==e||t.y!==i||t.width!==s||t.height!==o}moveNode(t,e,i,s,o,n){if(t.locked)return null;"number"!=typeof e&&(e=t.x),"number"!=typeof i&&(i=t.y),"number"!=typeof s&&(s=t.width),"number"!=typeof o&&(o=t.height);let r=t.width!==s||t.height!==o,h={x:e,y:i,width:s,height:o,maxWidth:t.maxWidth,maxHeight:t.maxHeight,minWidth:t.minWidth,minHeight:t.minHeight};return h=this.prepareNode(h,r),t.x===h.x&&t.y===h.y&&t.width===h.width&&t.height===h.height?null:(t._dirty=!0,t.x=t._lastTriedX=h.x,t.y=t._lastTriedY=h.y,t.width=t._lastTriedWidth=h.width,t.height=t._lastTriedHeight=h.height,this._fixCollisions(t),n||(this._packNodes(),this._notify()),t)}getRow(){return this.nodes.reduce((t,e)=>Math.max(t,e.y+e.height),0)}beginUpdate(t){return t._updating||(t._updating=!0,this.nodes.forEach(t=>{t._packY=t.y})),this}endUpdate(){let t=this.nodes.find(t=>t._updating);return t&&(delete t._updating,this.nodes.forEach(t=>{delete t._packY})),this}save(){let t=[];return s.Utils.sort(this.nodes),this.nodes.forEach(e=>{let i={};for(let t in e)"_"!==t[0]&&null!==e[t]&&void 0!==e[t]&&(i[t]=e[t]);delete i.el,delete i.grid,i.autoPosition||delete i.autoPosition,i.noResize||delete i.noResize,i.noMove||delete i.noMove,i.locked||delete i.locked,t.push(i)}),t}layoutsNodesChange(t){return!this._layouts||this._ignoreLayoutsNodeChange||this._layouts.forEach((e,i)=>{if(!e||i===this.column)return this;i<this.column?this._layouts[i]=void 0:t.forEach(t=>{let s=e.find(e=>e._id===t._id);if(!s)return this;let o=i/this.column;t.y!==t._origY&&(s.y+=t.y-t._origY),t.x!==t._origX&&(s.x=Math.round(t.x*o)),t.width!==t._origW&&(s.width=Math.round(t.width*o))})}),this}updateNodeWidths(t,e,i){if(!this.nodes.length||t===e)return this;let o=[];if(this.nodes.forEach((t,e)=>{o[e]={x:t.x,y:t.y,width:t.width,_id:t._id}}),this._layouts=this._layouts||[],this._layouts[t]=o,1===e&&i&&i.length){let t=0;i.forEach(e=>{e.x=0,e.width=1,e.y=Math.max(e.y,t),t=e.y+e.height})}else i=s.Utils.sort(this.nodes,-1,t);let n=this._layouts[e]||[],r=this._layouts.length-1;0===n.length&&e>t&&e<r&&(n=this._layouts[r]||[],n.length&&(t=r,n.forEach(t=>{let e=i.findIndex(e=>e._id===t._id);-1!==e&&(i[e].x=t.x,i[e].y=t.y,i[e].width=t.width)}),n=[]));let h=[];n.forEach(t=>{let e=i.findIndex(e=>e&&e._id===t._id);-1!==e&&(i[e].x=t.x,i[e].y=t.y,i[e].width=t.width,h.push(i[e]),i[e]=null)});let a=e/t;return i.forEach(i=>{if(!i)return this;i.x=1===e?0:Math.round(i.x*a),i.width=1===e||1===t?1:Math.round(i.width*a)||1,h.push(i)}),h=s.Utils.sort(h,-1,e),this._ignoreLayoutsNodeChange=!0,this.batchUpdate(),this.nodes=[],h.forEach(t=>{this.addNode(t,!1),t._dirty=!0},this),this.commit(),delete this._ignoreLayoutsNodeChange,this}saveInitial(){return this.nodes.forEach(t=>{t._origX=t.x,t._origY=t.y,t._origW=t.width,t._origH=t.height,delete t._dirty}),this}cleanupNode(t){for(let e in t)"_"===e[0]&&delete t[e]}}o._idSeq=1,e.GridStackEngine=o},function(t,e,i){"use strict";
// gridstack-dd-jqueryui.ts 2.0.0-dev @preserve
Object.defineProperty(e,"__esModule",{value:!0});const s=i(1),o=i(4);e.$=o,i(7);class n extends s.GridStackDD{constructor(t){super(t)}resizable(t,e,i,s){let n=o(t);if("disable"===e||"enable"===e)n.resizable(e);else if("destroy"===e)n.data("ui-resizable")&&n.resizable(e);else if("option"===e)n.resizable(e,i,s);else{let t=n.data("gs-resize-handles")?n.data("gs-resize-handles"):this.grid.opts.resizable.handles;n.resizable(Object.assign({},this.grid.opts.resizable,{handles:t},{start:e.start,stop:e.stop,resize:e.resize}))}return this}draggable(t,e,i,s){let n=o(t);return"disable"===e||"enable"===e?n.draggable(e):"destroy"===e?n.data("ui-draggable")&&n.draggable(e):"option"===e?n.draggable(e,i,s):n.draggable(Object.assign({},this.grid.opts.draggable,{containment:this.grid.opts._isNested&&!this.grid.opts.dragOut?o(this.grid.el).parent():this.grid.opts.draggable.containment||null,start:e.start,stop:e.stop,drag:e.drag})),this}dragIn(t,e){return o(t).draggable(e),this}droppable(t,e,i,s){let n=o(t);return"function"!=typeof e.accept||e._accept||(e._accept=e.accept,e.accept=t=>e._accept(t.get(0))),n.droppable(e,i,s),this}isDroppable(t){let e=o(t);return Boolean(e.data("ui-droppable"))}isDraggable(t){let e=o(t);return Boolean(e.data("ui-draggable"))}on(t,e,i){return o(t).on(e,(t,e)=>{i(t,e.draggable?e.draggable[0]:t.target,e.helper?e.helper[0]:null)}),this}off(t,e){return o(t).off(e),this}}e.GridStackDDJQueryUI=n,s.GridStackDD.registerPlugin(n)},function(e,i){e.exports=t},function(t,e,i){"use strict";
// gridstack.ts 2.0.0-dev @preserve
function s(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),i(6);const o=i(2),n=i(0),r=i(1);s(i(0)),s(i(2)),s(i(1)),i(3),s(i(3));class h{constructor(t,e={}){this._gsEventHandler={},this.setGridWidth=n.obsolete(this,h.prototype.column,"setGridWidth","column","v0.5.3"),this.setColumn=n.obsolete(this,h.prototype.column,"setColumn","column","v0.6.4"),this.getGridHeight=n.obsolete(this,o.GridStackEngine.prototype.getRow,"getGridHeight","getRow","v1.0.0"),this.el=t,e=e||{},n.obsoleteOpts(e,"width","column","v0.5.3"),n.obsoleteOpts(e,"height","maxRow","v0.5.3"),n.obsoleteOpts(e,"verticalMargin","margin","v2.0"),n.obsoleteOptsDel(e,"oneColumnModeClass","v0.6.3",". Use class `.grid-stack-1` instead"),n.obsoleteAttr(this.el,"data-gs-width","data-gs-column","v0.5.3"),n.obsoleteAttr(this.el,"data-gs-height","data-gs-max-row","v0.5.3"),n.obsoleteAttr(this.el,"data-gs-current-height","data-gs-current-row","v1.0.0"),e.row&&(e.minRow=e.maxRow=e.row,delete e.row);let i=n.Utils.toNumber(t.getAttribute("data-gs-row")),s={column:n.Utils.toNumber(t.getAttribute("data-gs-column"))||12,minRow:i||(n.Utils.toNumber(t.getAttribute("data-gs-min-row"))||0),maxRow:i||(n.Utils.toNumber(t.getAttribute("data-gs-max-row"))||0),itemClass:"grid-stack-item",placeholderClass:"grid-stack-placeholder",placeholderText:"",handle:".grid-stack-item-content",handleClass:null,styleInHead:!1,cellHeight:"auto",margin:10,auto:!0,minWidth:768,float:!1,staticGrid:!1,_class:"grid-stack-instance-"+(1e4*Math.random()).toFixed(0),animate:n.Utils.toBool(t.getAttribute("data-gs-animate"))||!1,alwaysShowResizeHandle:!1,resizable:{autoHide:!e.alwaysShowResizeHandle,handles:"se"},draggable:{handle:(e.handleClass?"."+e.handleClass:e.handle?e.handle:"")||".grid-stack-item-content",scroll:!1,appendTo:"body"},dragIn:void 0,dragInOptions:{revert:"invalid",handle:".grid-stack-item-content",scroll:!1,appendTo:"body"},disableDrag:!1,disableResize:!1,rtl:"auto",removable:!1,removableOptions:{accept:"."+(e.itemClass||"grid-stack-item")},removeTimeout:2e3,marginUnit:"px",cellHeightUnit:"px",disableOneColumnMode:!1,oneColumnModeDomSort:!1};if(this.opts=n.Utils.defaults(e,s),this.initMargin(),!1===this.opts.ddPlugin?this.opts.ddPlugin=r.GridStackDD:void 0===this.opts.ddPlugin&&(this.opts.ddPlugin=r.GridStackDD.get()),this.dd=new this.opts.ddPlugin(this),"auto"===this.opts.rtl&&(this.opts.rtl="rtl"===t.style.direction),this.opts.rtl&&this.el.classList.add("grid-stack-rtl"),this.opts._isNested=null!==n.Utils.closestByClass(this.el,e.itemClass),this.opts._isNested&&this.el.classList.add("grid-stack-nested"),this._isAutoCellHeight="auto"===this.opts.cellHeight,this._isAutoCellHeight){let t=-this.opts.marginRight-this.opts.marginLeft+this.opts.marginTop+this.opts.marginBottom;this.cellHeight(this.cellWidth()+t,!1)}else this.cellHeight(this.opts.cellHeight,!1);if(this.el.classList.add(this.opts._class),this._setStaticClass(),this._initStyles(),this.engine=new o.GridStackEngine(this.opts.column,(t,e=!0)=>{let i=0;this.engine.nodes.forEach(t=>{i=Math.max(i,t.y+t.height)}),t.forEach(t=>{let i=t.el;e&&null===t._id?i&&i.parentNode&&i.parentNode.removeChild(i):this._writeAttrs(i,t.x,t.y,t.width,t.height)}),this._updateStyles(i+10)},this.opts.float,this.opts.maxRow),this.opts.auto){let t=[];this.getGridItems().forEach(e=>{let i=parseInt(e.getAttribute("data-gs-x")),s=parseInt(e.getAttribute("data-gs-y"));t.push({el:e,i:(Number.isNaN(i)?1e3:i)+(Number.isNaN(s)?1e3:s)*this.opts.column})}),t.sort(t=>t.i).forEach(t=>{this._prepareElement(t.el)})}this.engine.saveInitial(),this.setAnimation(this.opts.animate);let a=document.createElement("div");a.className="placeholder-content",a.innerHTML=this.opts.placeholderText,this.placeholder=document.createElement("div"),this.placeholder.classList.add(this.opts.placeholderClass,this.opts.itemClass),this.placeholder.appendChild(a),this._updateContainerHeight(),window.addEventListener("resize",this._onResizeHandler.bind(this)),this._onResizeHandler(),this._setupDragIn(),this._setupRemoveDrop(),this._setupAcceptWidget()}static init(t={},e=".grid-stack"){let i=h.getGridElement(e);return i?(i.gridstack||(i.gridstack=new h(i,n.Utils.clone(t))),i.gridstack):("string"==typeof e?console.log("gridstack.js: init() no grid was found. Did you forget class "+e+' on your element ?\n".grid-stack" is required for proper CSS styling and drag/drop.'):console.log("gridstack.js: init() no grid element was passed."),null)}static initAll(t={},e=".grid-stack"){let i=[];return h.getGridElements(e).forEach(e=>{e.gridstack||(e.gridstack=new h(e,n.Utils.clone(t))),i.push(e.gridstack)}),0===i.length&&console.log("gridstack.js: initAll() no grid was found. Did you forget class "+e+' on your element ?\n".grid-stack" is required for proper CSS styling and drag/drop.'),i}addWidget(t,e){if(arguments.length>2){console.warn("gridstack.ts: `addWidget(el, x, y, width...)` is deprecated. Use `addWidget(el, {x, y, width,...})`. It will be removed soon");let e=arguments,i=1,s={x:e[i++],y:e[i++],width:e[i++],height:e[i++],autoPosition:e[i++],minWidth:e[i++],maxWidth:e[i++],minHeight:e[i++],maxHeight:e[i++],id:e[i++]};return this.addWidget(t,s)}if("string"==typeof t){let e=document.implementation.createHTMLDocument();e.body.innerHTML=t,t=e.body.children[0]}if(e){let i=this._readAttr(t);n.Utils.defaults(e,i),this.engine.prepareNode(e),this._writeAttr(t,e)}return this.el.appendChild(t),this.makeWidget(t)}save(){return this.engine.save()}load(t,e=!0){let i=h.Utils.sort(t),s=[];if(this.batchUpdate(),e){[...this.engine.nodes].forEach(t=>{i.find(e=>t.id===e.id)||("function"==typeof e?e(t,!1):(s.push(t),this.removeWidget(t.el,!0,!1)))})}i.forEach(t=>{let i=this.engine.nodes.find(e=>e.id===t.id);i?this.update(i.el,t.x,t.y,t.width,t.height):e&&("function"==typeof e?e(t,!0):this.addWidget('<div><div class="grid-stack-item-content"></div></div>',t))}),this.engine.removedNodes=s,this.commit()}batchUpdate(){return this.engine.batchUpdate(),this}getCellHeight(){if(this.opts.cellHeight&&"auto"!==this.opts.cellHeight)return this.opts.cellHeight;let t=this.el.querySelector("."+this.opts.itemClass),e=n.Utils.toNumber(t.getAttribute("data-gs-height"));return Math.round(t.offsetHeight/e)}cellHeight(t,e=!0){let i=n.Utils.parseHeight(t);return this.opts.cellHeightUnit===i.unit&&this.opts.cellHeight===i.height||(this.opts.cellHeightUnit=i.unit,this.opts.cellHeight=i.height,e&&this._updateStyles()),this}cellWidth(){return this.el.offsetWidth/this.opts.column}commit(){return this.engine.commit(),this._triggerRemoveEvent(),this._triggerAddEvent(),this._triggerChangeEvent(),this}compact(){return this.engine.compact(),this._triggerChangeEvent(),this}column(t,e){if(this.opts.column===t)return this;let i=this.opts.column;if(1===t?this._prevColumn=i:delete this._prevColumn,this.el.classList.remove("grid-stack-"+i),this.el.classList.add("grid-stack-"+t),this.opts.column=this.engine.column=t,!0===e)return this;let s=void 0;return 1===t&&this.opts.oneColumnModeDomSort&&(s=[],this.getGridItems().forEach(t=>{t.gridstackNode&&s.push(t.gridstackNode)}),s.length||(s=void 0)),this.engine.updateNodeWidths(i,t,s),this._triggerChangeEvent(!0),this}getColumn(){return this.opts.column}getGridItems(){return Array.from(this.el.children).filter(t=>t.matches("."+this.opts.itemClass)&&!t.matches("."+this.opts.placeholderClass))}destroy(t=!0){return window.removeEventListener("resize",this._onResizeHandler),this.disable(),t?this.el.parentNode.removeChild(this.el):(this.removeAll(t),this.el.classList.remove(this.opts._class),delete this.el.gridstack),n.Utils.removeStylesheet(this._stylesId),delete this.engine,this}disable(){return this.enableMove(!1),this.enableResize(!1),this._triggerEvent("disable"),this}enable(){return this.enableMove(!0),this.enableResize(!0),this._triggerEvent("enable"),this}enableMove(t,e=!0){return this.getGridItems().forEach(e=>this.movable(e,t)),e&&(this.opts.disableDrag=!t),this}enableResize(t,e=!0){return this.getGridItems().forEach(e=>this.resizable(e,t)),e&&(this.opts.disableResize=!t),this}float(t){return this.engine.float=t,this._triggerChangeEvent(),this}getFloat(){return this.engine.float}getCellFromPixel(t,e=!1){let i,s=this.el.getBoundingClientRect();i=e?{top:s.top+document.documentElement.scrollTop,left:s.left}:{top:this.el.offsetTop,left:this.el.offsetLeft};let o=t.left-i.left,n=t.top-i.top,r=s.width/this.opts.column,h=s.height/parseInt(this.el.getAttribute("data-gs-current-row"));return{x:Math.floor(o/r),y:Math.floor(n/h)}}getRow(){return Math.max(this.engine.getRow(),this.opts.minRow)}isAreaEmpty(t,e,i,s){return this.engine.isAreaEmpty(t,e,i,s)}locked(t,e){return this.getElements(t).forEach(t=>{let i=t.gridstackNode;i&&(i.locked=e||!1,i.locked?t.setAttribute("data-gs-locked","yes"):t.removeAttribute("data-gs-locked"))}),this}makeWidget(t){let e=this.getElement(t);return this._prepareElement(e,!0),this._updateContainerHeight(),this._triggerAddEvent(),this._triggerChangeEvent(),e}maxWidth(t,e){return this._updateAttr(t,e,"data-gs-max-width","maxWidth")}minWidth(t,e){return this._updateAttr(t,e,"data-gs-min-width","minWidth")}maxHeight(t,e){return this._updateAttr(t,e,"data-gs-max-height","maxHeight")}minHeight(t,e){return this._updateAttr(t,e,"data-gs-min-height","minHeight")}movable(t,e){return this.getElements(t).forEach(t=>{let i=t.gridstackNode;i&&(i.noMove=!e,i.noMove?(this.dd.draggable(t,"disable"),t.classList.remove("ui-draggable-handle")):(this.dd.draggable(t,"enable"),t.classList.remove("ui-draggable-handle")))}),this}move(t,e,i){return this._updateElement(t,(t,s)=>{e=void 0!==e?e:s.x,i=void 0!==i?i:s.y,this.engine.moveNode(s,e,i,s.width,s.height)}),this}on(t,e){if(-1!==t.indexOf(" ")){return t.split(" ").forEach(t=>this.on(t,e)),this}if("change"===t||"added"===t||"removed"===t||"enable"===t||"disable"===t){let i="enable"===t||"disable"===t;this._gsEventHandler[t]=i?t=>e(t):t=>e(t,t.detail),this.el.addEventListener(t,this._gsEventHandler[t])}else"dragstart"===t||"dragstop"===t||"resizestart"===t||"resizestop"===t||"dropped"===t?this._gsEventHandler[t]=e:console.log("gridstack.on("+t+") event not supported");return this}off(t){if(-1!==t.indexOf(" ")){return t.split(" ").forEach(t=>this.off(t)),this}return"change"!==t&&"added"!==t&&"removed"!==t&&"enable"!==t&&"disable"!==t||this._gsEventHandler[t]&&this.el.removeEventListener(t,this._gsEventHandler[t]),delete this._gsEventHandler[t],this}removeWidget(t,e=!0,i=!0){return this.getElements(t).forEach(t=>{if(t.parentElement!==this.el)return;let s=t.gridstackNode;s||(s=this.engine.nodes.find(e=>t===e.el)),s&&(delete t.gridstackNode,this.dd.draggable(t,"destroy").resizable(t,"destroy"),this.engine.removeNode(s,e,i),e&&t.parentElement&&t.remove())}),i&&(this._triggerRemoveEvent(),this._triggerChangeEvent()),this}removeAll(t=!0){return this.engine.nodes.forEach(t=>{delete t.el.gridstackNode,this.dd.draggable(t.el,"destroy").resizable(t.el,"destroy")}),this.engine.removeAll(t),this._triggerRemoveEvent(),this}resize(t,e,i){return this._updateElement(t,(t,s)=>{e=e||s.width,i=i||s.height,this.engine.moveNode(s,s.x,s.y,e,i)}),this}resizable(t,e){return this.getElements(t).forEach(t=>{let i=t.gridstackNode;i&&(i.noResize=!e,i.noResize?this.dd.resizable(t,"disable"):this.dd.resizable(t,"enable"))}),this}setAnimation(t){return t?this.el.classList.add("grid-stack-animate"):this.el.classList.remove("grid-stack-animate"),this}setStatic(t){return this.opts.staticGrid=!0===t,this.enableMove(!t),this.enableResize(!t),this._setStaticClass(),this}update(t,e,i,s,o){return this._updateElement(t,(t,n)=>{e=void 0!==e?e:n.x,i=void 0!==i?i:n.y,s=s||n.width,o=o||n.height,this.engine.moveNode(n,e,i,s,o)}),this}margin(t){let e=n.Utils.parseHeight(t);if(this.opts.marginUnit!==e.unit||this.opts.margin!==e.height)return this.opts.marginUnit=e.unit,this.opts.marginTop=this.opts.marginBottom=this.opts.marginLeft=this.opts.marginRight=this.opts.margin=e.height,this._updateStyles(),this}getMargin(){return this.opts.margin}willItFit(t,e,i,s,o){return this.engine.canBePlacedWithRespectToHeight({x:t,y:e,width:i,height:s,autoPosition:o})}_triggerChangeEvent(t){if(this.engine.batchMode)return this;let e=this.engine.getDirtyNodes(!0);return e&&e.length&&(t||this.engine.layoutsNodesChange(e),this._triggerEvent("change",e)),this.engine.saveInitial(),this}_triggerAddEvent(){return this.engine.batchMode||this.engine.addedNodes&&this.engine.addedNodes.length>0&&(this.engine.layoutsNodesChange(this.engine.addedNodes),this.engine.addedNodes.forEach(t=>{delete t._dirty}),this._triggerEvent("added",this.engine.addedNodes),this.engine.addedNodes=[]),this}_triggerRemoveEvent(){return this.engine.batchMode||this.engine.removedNodes&&this.engine.removedNodes.length>0&&(this._triggerEvent("removed",this.engine.removedNodes),this.engine.removedNodes=[]),this}_triggerEvent(t,e){let i=e?new CustomEvent(t,{bubbles:!1,detail:e}):new Event(t);return this.el.dispatchEvent(i),this}_initStyles(){this._stylesId&&n.Utils.removeStylesheet(this._stylesId),this._stylesId="gridstack-style-"+(1e5*Math.random()).toFixed();let t=this.opts.styleInHead?void 0:this.el.parentNode;return this._styles=n.Utils.createStylesheet(this._stylesId,t),null!==this._styles&&(this._styles._max=0),this}_updateStyles(t){if(!this._styles)return this;if(void 0===t&&(t=this._styles._max),this._initStyles(),this._updateContainerHeight(),!this.opts.cellHeight)return this;if(0!==this._styles._max&&t<=this._styles._max)return this;let e=this.opts.cellHeight,i=this.opts.cellHeightUnit,s=`.${this.opts._class} > .${this.opts.itemClass}`;if(0===this._styles._max){n.Utils.addCSSRule(this._styles,s,`min-height: ${e}${i}`);let t=this.opts.marginTop+this.opts.marginUnit,o=this.opts.marginBottom+this.opts.marginUnit,r=this.opts.marginRight+this.opts.marginUnit,h=this.opts.marginLeft+this.opts.marginUnit,a=`${s} > .grid-stack-item-content`,l=`.${this.opts._class} > .grid-stack-placeholder > .placeholder-content`;n.Utils.addCSSRule(this._styles,a,`top: ${t}; right: ${r}; bottom: ${o}; left: ${h};`),n.Utils.addCSSRule(this._styles,l,`top: ${t}; right: ${r}; bottom: ${o}; left: ${h};`),n.Utils.addCSSRule(this._styles,`${s} > .ui-resizable-ne`,`right: ${r}`),n.Utils.addCSSRule(this._styles,`${s} > .ui-resizable-e`,`right: ${r}`),n.Utils.addCSSRule(this._styles,`${s} > .ui-resizable-se`,`right: ${r}; bottom: ${o}`),n.Utils.addCSSRule(this._styles,`${s} > .ui-resizable-nw`,`left: ${h}`),n.Utils.addCSSRule(this._styles,`${s} > .ui-resizable-w`,`left: ${h}`),n.Utils.addCSSRule(this._styles,`${s} > .ui-resizable-sw`,`left: ${h}; bottom: ${o}`)}if(t>this._styles._max){let o=t=>e*t+i;for(let e=this._styles._max+1;e<=t;e++){let t=o(e);n.Utils.addCSSRule(this._styles,`${s}[data-gs-y="${e-1}"]`,`top: ${o(e-1)}`),n.Utils.addCSSRule(this._styles,`${s}[data-gs-height="${e}"]`,`height: ${t}`),n.Utils.addCSSRule(this._styles,`${s}[data-gs-min-height="${e}"]`,`min-height: ${t}`),n.Utils.addCSSRule(this._styles,`${s}[data-gs-max-height="${e}"]`,`max-height: ${t}`)}this._styles._max=t}return this}_updateContainerHeight(){if(this.engine.batchMode)return this;let t=this.getRow(),e=parseInt(getComputedStyle(this.el)["min-height"]);if(e>0){let i=Math.round(e/this.getCellHeight());t<i&&(t=i)}if(this.el.setAttribute("data-gs-current-row",String(t)),0===t)return this.el.style.removeProperty("height"),this;let i=this.opts.cellHeight,s=this.opts.cellHeightUnit;return i?(this.el.style.height=t*i+s,this):this}_setupRemovingTimeout(t){let e=t.gridstackNode;return e&&!e._removeTimeout&&this.opts.removable?(e._removeTimeout=setTimeout(()=>{t.classList.add("grid-stack-item-removing"),e._isAboutToRemove=!0},this.opts.removeTimeout),this):this}_clearRemovingTimeout(t){let e=t.gridstackNode;return e&&e._removeTimeout?(clearTimeout(e._removeTimeout),delete e._removeTimeout,t.classList.remove("grid-stack-item-removing"),delete e._isAboutToRemove,this):this}_prepareDragDropByNode(t){let e,i,s=t.el,o=(o,n)=>{this._gsEventHandler[o.type]&&this._gsEventHandler[o.type](o,o.target),this.engine.cleanNodes(),this.engine.beginUpdate(t),e=this.cellWidth(),i=this.getCellHeight();let{target:r}=o;this.placeholder.setAttribute("data-gs-x",r.getAttribute("data-gs-x")),this.placeholder.setAttribute("data-gs-y",r.getAttribute("data-gs-y")),this.placeholder.setAttribute("data-gs-width",r.getAttribute("data-gs-width")),this.placeholder.setAttribute("data-gs-height",r.getAttribute("data-gs-height")),this.el.append(this.placeholder),t.el=this.placeholder,t._beforeDragX=t.x,t._beforeDragY=t.y,t._prevYPix=n.position.top;let h=t.minHeight||1;if(this.dd.resizable(s,"option","minWidth",e*(t.minWidth||1)),this.dd.resizable(s,"option","minHeight",i*h),"resizestart"===o.type){let t=r.querySelector(".grid-stack-item");if(t){document.createEvent("HTMLEvents").initEvent("resizestart",!0,!1),t.dispatchEvent(o)}}},r=(o,r)=>{let h,a,l=Math.round(r.position.left/e),d=Math.floor((r.position.top+i/2)/i);if("drag"===o.type){let e=r.position.top-t._prevYPix;if(t._prevYPix=r.position.top,n.Utils.updateScrollPosition(s,r.position,e),s.dataset.inTrashZone||l<0||l>=this.engine.column||d<0||!this.engine.float&&d>this.engine.getRow()){if(t._temporaryRemoved)return;!0===this.opts.removable&&this._setupRemovingTimeout(s),l=t._beforeDragX,d=t._beforeDragY,this.placeholder.parentNode===this.el&&this.el.removeChild(this.placeholder),this.engine.removeNode(t),this._updateContainerHeight(),t._temporaryRemoved=!0}else this._clearRemovingTimeout(s),t._temporaryRemoved&&(this.engine.addNode(t),this._writeAttrs(this.placeholder,l,d,h,a),this.el.appendChild(this.placeholder),t.el=this.placeholder,delete t._temporaryRemoved)}else if("resize"===o.type){if(l<0)return;h=Math.round(r.size.width/e),a=Math.round((r.size.height+this.getMargin())/i)}let p=h||t._lastTriedWidth,c=a||t._lastTriedHeight;!this.engine.canMoveNode(t,l,d,h,a)||t._lastTriedX===l&&t._lastTriedY===d&&t._lastTriedWidth===p&&t._lastTriedHeight===c||(t._lastTriedX=l,t._lastTriedY=d,t._lastTriedWidth=h,t._lastTriedHeight=a,this.engine.moveNode(t,l,d,h,a),this._updateContainerHeight())},h=e=>{this.placeholder.parentNode===this.el&&this.el.removeChild(this.placeholder);let i=e.target;if(i.gridstackNode&&i.gridstackNode.grid===this){if(t.el=i,t._isAboutToRemove){let o=s.gridstackNode.grid;o._gsEventHandler[e.type]&&o._gsEventHandler[e.type](e,i),o.engine.removedNodes.push(t),o.dd.draggable(s,"destroy").resizable(s,"destroy"),delete s.gridstackNode,o._triggerRemoveEvent(),s.parentElement&&s.remove()}else this._clearRemovingTimeout(s),t._temporaryRemoved?(n.Utils.removePositioningStyles(i),this._writeAttrs(i,t._beforeDragX,t._beforeDragY,t.width,t.height),t.x=t._beforeDragX,t.y=t._beforeDragY,delete t._temporaryRemoved,this.engine.addNode(t)):(n.Utils.removePositioningStyles(i),this._writeAttrs(i,t.x,t.y,t.width,t.height)),this._gsEventHandler[e.type]&&this._gsEventHandler[e.type](e,i);this._updateContainerHeight(),this._triggerChangeEvent(),this.engine.endUpdate(),"resizestop"===e.type&&i.querySelectorAll(".grid-stack").forEach(t=>t.gridstack._onResizeHandler())}};return this.dd.draggable(s,{start:o,stop:h,drag:r}).resizable(s,{start:o,stop:h,resize:r}),(t.noMove||this.opts.disableDrag||this.opts.staticGrid)&&this.dd.draggable(s,"disable"),(t.noResize||this.opts.disableResize||this.opts.staticGrid)&&this.dd.resizable(s,"disable"),this._writeAttr(s,t),this}_prepareElement(t,e=!1){t.classList.add(this.opts.itemClass);let i=this._readAttr(t,{el:t,grid:this});return i=this.engine.addNode(i,e),t.gridstackNode=i,this._prepareDragDropByNode(i),this}_writeAttrs(t,e,i,s,o){return null!=e&&t.setAttribute("data-gs-x",String(e)),null!=i&&t.setAttribute("data-gs-y",String(i)),s&&t.setAttribute("data-gs-width",String(s)),o&&t.setAttribute("data-gs-height",String(o)),this}_writeAttr(t,e){return e?(this._writeAttrs(t,e.x,e.y,e.width,e.height),e.autoPosition?t.setAttribute("data-gs-auto-position","true"):t.removeAttribute("data-gs-auto-position"),e.minWidth&&t.setAttribute("data-gs-min-width",String(e.minWidth)),e.maxWidth&&t.setAttribute("data-gs-max-width",String(e.maxWidth)),e.minHeight&&t.setAttribute("data-gs-min-height",String(e.minHeight)),e.maxHeight&&t.setAttribute("data-gs-max-height",String(e.maxHeight)),e.noResize?t.setAttribute("data-gs-no-resize","true"):t.removeAttribute("data-gs-no-resize"),e.noMove?t.setAttribute("data-gs-no-move","true"):t.removeAttribute("data-gs-no-move"),e.locked?t.setAttribute("data-gs-locked","true"):t.removeAttribute("data-gs-locked"),e.resizeHandles&&t.setAttribute("data-gs-resize-handles",e.resizeHandles),e.id&&t.setAttribute("data-gs-id",String(e.id)),this):this}_readAttr(t,e={}){return e.x=n.Utils.toNumber(t.getAttribute("data-gs-x")),e.y=n.Utils.toNumber(t.getAttribute("data-gs-y")),e.width=n.Utils.toNumber(t.getAttribute("data-gs-width")),e.height=n.Utils.toNumber(t.getAttribute("data-gs-height")),e.maxWidth=n.Utils.toNumber(t.getAttribute("data-gs-max-width")),e.minWidth=n.Utils.toNumber(t.getAttribute("data-gs-min-width")),e.maxHeight=n.Utils.toNumber(t.getAttribute("data-gs-max-height")),e.minHeight=n.Utils.toNumber(t.getAttribute("data-gs-min-height")),e.autoPosition=n.Utils.toBool(t.getAttribute("data-gs-auto-position")),e.noResize=n.Utils.toBool(t.getAttribute("data-gs-no-resize")),e.noMove=n.Utils.toBool(t.getAttribute("data-gs-no-move")),e.locked=n.Utils.toBool(t.getAttribute("data-gs-locked")),e.resizeHandles=t.getAttribute("data-gs-resize-handles"),e.id=t.getAttribute("data-gs-id"),e}_updateElement(t,e){let i=this.getElement(t);if(!i)return this;let s=i.gridstackNode;return s?(this.engine.cleanNodes(),this.engine.beginUpdate(s),e.call(this,i,s),this._updateContainerHeight(),this._triggerChangeEvent(),this.engine.endUpdate(),this):this}_setStaticClass(){return!0===this.opts.staticGrid?this.el.classList.add("grid-stack-static"):this.el.classList.remove("grid-stack-static"),this}_onResizeHandler(){if(this._isAutoCellHeight&&n.Utils.throttle(()=>{let t=-this.opts.marginRight-this.opts.marginLeft+this.opts.marginTop+this.opts.marginBottom;this.cellHeight(this.cellWidth()+t)},100),!this.opts.disableOneColumnMode&&this.el.clientWidth<=this.opts.minWidth){if(this._oneColumnMode)return this;this._oneColumnMode=!0,this.column(1)}else{if(!this._oneColumnMode)return this;delete this._oneColumnMode,this.column(this._prevColumn)}return this}_setupDragIn(){return this.opts.staticGrid||"string"!=typeof this.opts.dragIn||this.dd.isDraggable(this.opts.dragIn)||this.dd.dragIn(this.opts.dragIn,this.opts.dragInOptions),this}_setupRemoveDrop(){if(!this.opts.staticGrid&&"string"==typeof this.opts.removable){let t=document.querySelector(this.opts.removable);if(!t)return this;this.dd.isDroppable(t)||this.dd.droppable(t,this.opts.removableOptions),this.dd.on(t,"dropover",(t,e)=>{let i=e.gridstackNode;i&&i.grid===this&&(e.dataset.inTrashZone="true",this._setupRemovingTimeout(e))}).on(t,"dropout",(t,e)=>{let i=e.gridstackNode;i&&i.grid===this&&(delete e.dataset.inTrashZone,this._clearRemovingTimeout(e))})}return this}_setupAcceptWidget(){if(this.opts.staticGrid||!this.opts.acceptWidgets)return this;let t=(t,e)=>{let i=e.gridstackNode,s=this.getCellFromPixel({left:t.pageX,top:t.pageY},!0),o=Math.max(0,s.x),n=Math.max(0,s.y);i._added?o===i.x&&n===i.y||!this.engine.canMoveNode(i,o,n)||(this.engine.moveNode(i,o,n),this._updateContainerHeight()):(i._added=!0,i.el=e,i.x=o,i.y=n,delete i.autoPosition,this.engine.cleanNodes(),this.engine.beginUpdate(i),this.engine.addNode(i),this._writeAttrs(this.placeholder,i.x,i.y,i.width,i.height),this.el.appendChild(this.placeholder),i.el=this.placeholder,i._beforeDragX=i.x,i._beforeDragY=i.y,this._updateContainerHeight())};return this.dd.droppable(this.el,{accept:t=>{let e=t.gridstackNode;if(e&&e.grid===this)return!1;if("function"==typeof this.opts.acceptWidgets)return this.opts.acceptWidgets(t);let i=!0===this.opts.acceptWidgets?".grid-stack-item":this.opts.acceptWidgets;return t.matches(i)}}).on(this.el,"dropover",(e,i)=>{let s,o,n=i.gridstackNode;if(!n||!n.width||!n.height){let t=parseInt(i.getAttribute("data-gs-width"));t>0&&(n=n||{},n.width=t);let e=parseInt(i.getAttribute("data-gs-height"));e>0&&(n=n||{},n.height=e)}let r=this.cellWidth(),h=this.getCellHeight();s=n&&n.width?n.width:Math.round(i.offsetWidth/r)||1,o=n&&n.height?n.height:Math.round(i.offsetHeight/h)||1;let a=this.engine.prepareNode({width:s,height:o,_added:!1,_temporary:!0});return a._isOutOfGrid=!0,i.gridstackNode=a,i._gridstackNodeOrig=n,this.dd.on(i,"drag",t),!1}).on(this.el,"dropout",(t,e)=>{let i=e.gridstackNode;if(i&&i._isOutOfGrid)return this.dd.off(e,"drag"),i.el=null,this.engine.removeNode(i),this.placeholder.parentNode===this.el&&this.el.removeChild(this.placeholder),this._updateContainerHeight(),e.gridstackNode=e._gridstackNodeOrig,!1}).on(this.el,"drop",(t,e,i)=>{this.placeholder.remove();let s=e._gridstackNodeOrig;if(delete e._gridstackNodeOrig,s&&s.grid&&s.grid!==this){let t=s.grid;t.placeholder.remove(),s.el=e,t.engine.removedNodes.push(s),t._triggerRemoveEvent()}let o=e.gridstackNode;return this.engine.cleanupNode(o),o.grid=this,this.dd.off(e,"drag"),i!==e?(i.remove(),e.gridstackNode=s,e=e.cloneNode(!0)):(e.remove(),this.dd.draggable(e,"destroy").resizable(e,"destroy")),e.gridstackNode=o,o.el=e,n.Utils.removePositioningStyles(e),this._writeAttr(e,o),this.el.appendChild(e),this._updateContainerHeight(),this.engine.addedNodes.push(o),this._triggerAddEvent(),this._triggerChangeEvent(),this.engine.endUpdate(),this._gsEventHandler.dropped&&this._gsEventHandler.dropped({type:"dropped"},s&&s.grid?s:void 0,o),window.setTimeout(()=>{o.el&&o.el.parentElement&&this._prepareDragDropByNode(o)}),!1}),this}getElement(t=".grid-stack-item"){return"string"==typeof t?document.querySelector(t)||document.querySelector("#"+t)||document.querySelector("."+t):t}getElements(t=".grid-stack-item"){if("string"==typeof t){let e=document.querySelectorAll(t);return e.length||(e=document.querySelectorAll("."+t)),e.length||(e=document.querySelectorAll("#"+t)),Array.from(e)}return[t]}static getGridElement(t=".grid-stack"){return"string"==typeof t?document.querySelector(t)||document.querySelector("#"+t)||document.querySelector("."+t):t}static getGridElements(t=".grid-stack"){if("string"==typeof t){let e=document.querySelectorAll(t);return e.length||(e=document.querySelectorAll("."+t)),e.length||(e=document.querySelectorAll("#"+t)),Array.from(e)}return[t]}initMargin(){let t=n.Utils.parseHeight(this.opts.margin);this.opts.marginUnit=t.unit;let e=this.opts.margin=t.height;return void 0===this.opts.marginTop?this.opts.marginTop=e:(t=n.Utils.parseHeight(this.opts.marginTop),this.opts.marginTop=t.height,delete this.opts.margin),void 0===this.opts.marginBottom?this.opts.marginBottom=e:(t=n.Utils.parseHeight(this.opts.marginBottom),this.opts.marginBottom=t.height,delete this.opts.margin),void 0===this.opts.marginRight?this.opts.marginRight=e:(t=n.Utils.parseHeight(this.opts.marginRight),this.opts.marginRight=t.height,delete this.opts.margin),void 0===this.opts.marginLeft?this.opts.marginLeft=e:(t=n.Utils.parseHeight(this.opts.marginLeft),this.opts.marginLeft=t.height,delete this.opts.margin),this.opts.marginUnit=t.unit,this}_updateAttr(t,e,i,s){return this.getElements(t).forEach(t=>{e?t.setAttribute(i,String(e)):t.removeAttribute(i),t.gridstackNode&&(t.gridstackNode[s]=e||void 0)}),this}}h.Utils=n.Utils,h.Engine=o.GridStackEngine,e.GridStack=h},function(t,e){
// gridstack-poly.js 2.0.0 @preserve
!function(){if("function"==typeof window.CustomEvent)return!1;window.CustomEvent=function(t,e){e=e||{bubbles:!1,cancelable:!1,detail:null};var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),i}}(),Number.isNaN=Number.isNaN||function(t){return"number"==typeof t&&t!=t},Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw TypeError('"this" is null or not defined');var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw TypeError("predicate must be a function");for(var s=arguments[1],o=0;o<i;){var n=e[o];if(t.call(s,n,o,e))return n;o++}},configurable:!0,writable:!0}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var s=arguments[1],o=0;o<i;){var n=e[o];if(t.call(s,n,o,e))return o;o++}return-1},configurable:!0,writable:!0})},function(t,e,i){(function(t){
/*! jQuery UI - v1.12.1 - 2019-11-20
* http://jqueryui.com
* Includes: widget.js, data.js, disable-selection.js, scroll-parent.js, widgets/draggable.js, widgets/droppable.js, widgets/resizable.js, widgets/mouse.js
* Copyright jQuery Foundation and other contributors; Licensed MIT
*/
!function(t){t.ui=t.ui||{},t.ui.version="1.12.1";var e,i=0,s=Array.prototype.slice;t.cleanData=(e=t.cleanData,function(i){var s,o,n;for(n=0;null!=(o=i[n]);n++)try{(s=t._data(o,"events"))&&s.remove&&t(o).triggerHandler("remove")}catch(t){}e(i)}),t.widget=function(e,i,s){var o,n,r,h={},a=e.split(".")[0],l=a+"-"+(e=e.split(".")[1]);return s||(s=i,i=t.Widget),t.isArray(s)&&(s=t.extend.apply(null,[{}].concat(s))),t.expr[":"][l.toLowerCase()]=function(e){return!!t.data(e,l)},t[a]=t[a]||{},o=t[a][e],n=t[a][e]=function(t,e){if(!this._createWidget)return new n(t,e);arguments.length&&this._createWidget(t,e)},t.extend(n,o,{version:s.version,_proto:t.extend({},s),_childConstructors:[]}),(r=new i).options=t.widget.extend({},r.options),t.each(s,(function(e,s){t.isFunction(s)?h[e]=function(){function t(){return i.prototype[e].apply(this,arguments)}function o(t){return i.prototype[e].apply(this,t)}return function(){var e,i=this._super,n=this._superApply;return this._super=t,this._superApply=o,e=s.apply(this,arguments),this._super=i,this._superApply=n,e}}():h[e]=s})),n.prototype=t.widget.extend(r,{widgetEventPrefix:o&&r.widgetEventPrefix||e},h,{constructor:n,namespace:a,widgetName:e,widgetFullName:l}),o?(t.each(o._childConstructors,(function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,n,i._proto)})),delete o._childConstructors):i._childConstructors.push(n),t.widget.bridge(e,n),n},t.widget.extend=function(e){for(var i,o,n=s.call(arguments,1),r=0,h=n.length;r<h;r++)for(i in n[r])o=n[r][i],n[r].hasOwnProperty(i)&&void 0!==o&&(t.isPlainObject(o)?e[i]=t.isPlainObject(e[i])?t.widget.extend({},e[i],o):t.widget.extend({},o):e[i]=o);return e},t.widget.bridge=function(e,i){var o=i.prototype.widgetFullName||e;t.fn[e]=function(n){var r="string"==typeof n,h=s.call(arguments,1),a=this;return r?this.length||"instance"!==n?this.each((function(){var i,s=t.data(this,o);return"instance"===n?(a=s,!1):s?t.isFunction(s[n])&&"_"!==n.charAt(0)?(i=s[n].apply(s,h))!==s&&void 0!==i?(a=i&&i.jquery?a.pushStack(i.get()):i,!1):void 0:t.error("no such method '"+n+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+n+"'")})):a=void 0:(h.length&&(n=t.widget.extend.apply(null,[n].concat(h))),this.each((function(){var e=t.data(this,o);e?(e.option(n||{}),e._init&&e._init()):t.data(this,o,new i(n,this))}))),a}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,s){s=t(s||this.defaultElement||this)[0],this.element=t(s),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},s!==this&&(t.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===s&&this.destroy()}}),this.document=t(s.style?s.ownerDocument:s.document||s),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,(function(t,i){e._removeClass(i,t)})),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var s,o,n,r=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(r={},s=e.split("."),e=s.shift(),s.length){for(o=r[e]=t.widget.extend({},this.options[e]),n=0;n<s.length-1;n++)o[s[n]]=o[s[n]]||{},o=o[s[n]];if(e=s.pop(),1===arguments.length)return void 0===o[e]?null:o[e];o[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];r[e]=i}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var i,s,o;for(i in e)o=this.classesElementLookup[i],e[i]!==this.options.classes[i]&&o&&o.length&&(s=t(o.get()),this._removeClass(o,i),s.addClass(this._classes({element:s,keys:i,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){var i=[],s=this;function o(o,n){var r,h;for(h=0;h<o.length;h++)r=s.classesElementLookup[o[h]]||t(),r=e.add?t(t.unique(r.get().concat(e.element.get()))):t(r.not(e.element).get()),s.classesElementLookup[o[h]]=r,i.push(o[h]),n&&e.classes[o[h]]&&i.push(e.classes[o[h]])}return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&o(e.keys.match(/\S+/g)||[],!0),e.extra&&o(e.extra.match(/\S+/g)||[]),i.join(" ")},_untrackClassesElement:function(e){var i=this;t.each(i.classesElementLookup,(function(s,o){-1!==t.inArray(e.target,o)&&(i.classesElementLookup[s]=t(o.not(e.target).get()))}))},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,s){s="boolean"==typeof s?s:i;var o="string"==typeof t||null===t,n={extra:o?e:i,keys:o?t:e,element:o?this.element:t,add:s};return n.element.toggleClass(this._classes(n),s),this},_on:function(e,i,s){var o,n=this;"boolean"!=typeof e&&(s=i,i=e,e=!1),s?(i=o=t(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,o=this.widget()),t.each(s,(function(s,r){function h(){if(e||!0!==n.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof r?n[r]:r).apply(n,arguments)}"string"!=typeof r&&(h.guid=r.guid=r.guid||h.guid||t.guid++);var a=s.match(/^([\w:-]*)\s*(.*)$/),l=a[1]+n.eventNamespace,d=a[2];d?o.on(l,d,h):i.on(l,h)}))},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(i).off(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){var i=this;return setTimeout((function(){return("string"==typeof t?i[t]:t).apply(i,arguments)}),e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,i,s){var o,n,r=this.options[e];if(s=s||{},(i=t.Event(i)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],n=i.originalEvent)for(o in n)o in i||(i[o]=n[o]);return this.element.trigger(i,s),!(t.isFunction(r)&&!1===r.apply(this.element[0],[i].concat(s))||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},(function(e,i){t.Widget.prototype["_"+e]=function(s,o,n){var r;"string"==typeof o&&(o={effect:o});var h=o?!0===o||"number"==typeof o?i:o.effect||i:e;"number"==typeof(o=o||{})&&(o={duration:o}),r=!t.isEmptyObject(o),o.complete=n,o.delay&&s.delay(o.delay),r&&t.effects&&t.effects.effect[h]?s[e](o):h!==e&&s[h]?s[h](o.duration,o.easing,n):s.queue((function(i){t(this)[e](),n&&n.call(s[0]),i()}))}})),t.widget,t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo((function(e){return function(i){return!!t.data(i,e)}})):function(e,i,s){return!!t.data(e,s[3])}}),t.fn.extend({disableSelection:(o="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(o+".ui-disableSelection",(function(t){t.preventDefault()}))}),enableSelection:function(){return this.off(".ui-disableSelection")}}),t.fn.scrollParent=function(e){var i=this.css("position"),s="absolute"===i,o=e?/(auto|scroll|hidden)/:/(auto|scroll)/,n=this.parents().filter((function(){var e=t(this);return(!s||"static"!==e.css("position"))&&o.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))})).eq(0);return"fixed"!==i&&n.length?n:t(this[0].ownerDocument||document)},t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var o,n=!1;t(document).on("mouseup",(function(){n=!1})),t.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,(function(t){return e._mouseDown(t)})).on("click."+this.widgetName,(function(i){if(!0===t.data(i.target,e.widgetName+".preventClickEvent"))return t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!n){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,s=1===e.which,o=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&t(e.target).closest(this.options.cancel).length;return!(s&&!o&&this._mouseCapture(e)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){i.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?(e.preventDefault(),0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),n=!0,0)))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,n=!1,e.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),t.ui.plugin={add:function(e,i,s){var o,n=t.ui[e].prototype;for(o in s)n.plugins[o]=n.plugins[o]||[],n.plugins[o].push([i,s[o]])},call:function(t,e,i,s){var o,n=t.plugins[e];if(n&&(s||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(o=0;o<n.length;o++)t.options[n[o][0]]&&n[o][1].apply(t.element,i)}},t.ui.safeActiveElement=function(t){var e;try{e=t.activeElement}catch(i){e=t.body}return e||(e=t.body),e.nodeName||(e=t.body),e},t.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&t(e).trigger("blur")},t.widget("ui.draggable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(e){var i=this.options;return!(this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0||(this.handle=this._getHandle(e),!this.handle||(this._blurActiveElement(e),this._blockFrames(!0===i.iframeFix?"iframe":i.iframeFix),0)))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map((function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var i=t.ui.safeActiveElement(this.document[0]);t(e.target).closest(i).length||t.ui.safeBlur(i)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter((function(){return"fixed"===t(this).css("position")})).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(!1===this._trigger("drag",e,s))return this._mouseUp(new t.Event("mouseup",e)),!1;this.position=s.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,s=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(s=t.ui.ddmanager.drop(this,e)),this.dropped&&(s=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||!0===this.options.revert||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),(function(){!1!==i._trigger("stop",e)&&i._clear()})):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new t.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!t(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper),o=s?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return o.parents("body").length||o.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s&&o[0]===this.element[0]&&this._setPositionRelative(),o[0]===this.element[0]||/(fixed|absolute)/.test(o.css("position"))||o.css("position","absolute"),o},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,o=this.options,n=this.document[0];this.relativeContainer=null,o.containment?"window"!==o.containment?"document"!==o.containment?o.containment.constructor!==Array?("parent"===o.containment&&(o.containment=this.helper[0].parentNode),(s=(i=t(o.containment))[0])&&(e=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i)):this.containment=o.containment:this.containment=[0,0,t(n).width()-this.helperProportions.width-this.margins.left,(t(n).height()||n.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||n.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(t,e){e||(e=this.position);var i="absolute"===t?1:-1,s=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,s,o,n,r=this.options,h=this._isRootNode(this.scrollParent[0]),a=t.pageX,l=t.pageY;return h&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(s=this.relativeContainer.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(a=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(l=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(a=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(l=i[3]+this.offset.click.top)),r.grid&&(o=r.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,l=i?o-this.offset.click.top>=i[1]||o-this.offset.click.top>i[3]?o:o-this.offset.click.top>=i[1]?o-r.grid[1]:o+r.grid[1]:o,n=r.grid[0]?this.originalPageX+Math.round((a-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,a=i?n-this.offset.click.left>=i[0]||n-this.offset.click.left>i[2]?n:n-this.offset.click.left>=i[0]?n-r.grid[0]:n+r.grid[0]:n),"y"===r.axis&&(a=this.originalPageX),"x"===r.axis&&(l=this.originalPageY)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:h?0:this.offset.scroll.top),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:h?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,i,s){return s=s||this._uiHash(),t.ui.plugin.call(this,e,[i,s,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),s.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i,s){var o=t.extend({},i,{item:s.element});s.sortables=[],t(s.options.connectToSortable).each((function(){var i=t(this).sortable("instance");i&&!i.options.disabled&&(s.sortables.push(i),i.refreshPositions(),i._trigger("activate",e,o))}))},stop:function(e,i,s){var o=t.extend({},i,{item:s.element});s.cancelHelperRemoval=!1,t.each(s.sortables,(function(){this.isOver?(this.isOver=0,s.cancelHelperRemoval=!0,this.cancelHelperRemoval=!1,this._storedCSS={position:this.placeholder.css("position"),top:this.placeholder.css("top"),left:this.placeholder.css("left")},this._mouseStop(e),this.options.helper=this.options._helper):(this.cancelHelperRemoval=!0,this._trigger("deactivate",e,o))}))},drag:function(e,i,s){t.each(s.sortables,(function(){var o=!1,n=this;n.positionAbs=s.positionAbs,n.helperProportions=s.helperProportions,n.offset.click=s.offset.click,n._intersectsWith(n.containerCache)&&(o=!0,t.each(s.sortables,(function(){return this.positionAbs=s.positionAbs,this.helperProportions=s.helperProportions,this.offset.click=s.offset.click,this!==n&&this._intersectsWith(this.containerCache)&&t.contains(n.element[0],this.element[0])&&(o=!1),o}))),o?(n.isOver||(n.isOver=1,s._parent=i.helper.parent(),n.currentItem=i.helper.appendTo(n.element).data("ui-sortable-item",!0),n.options._helper=n.options.helper,n.options.helper=function(){return i.helper[0]},e.target=n.currentItem[0],n._mouseCapture(e,!0),n._mouseStart(e,!0,!0),n.offset.click.top=s.offset.click.top,n.offset.click.left=s.offset.click.left,n.offset.parent.left-=s.offset.parent.left-n.offset.parent.left,n.offset.parent.top-=s.offset.parent.top-n.offset.parent.top,s._trigger("toSortable",e),s.dropped=n.element,t.each(s.sortables,(function(){this.refreshPositions()})),s.currentItem=s.element,n.fromOutside=s),n.currentItem&&(n._mouseDrag(e),i.position=n.position)):n.isOver&&(n.isOver=0,n.cancelHelperRemoval=!0,n.options._revert=n.options.revert,n.options.revert=!1,n._trigger("out",e,n._uiHash(n)),n._mouseStop(e,!0),n.options.revert=n.options._revert,n.options.helper=n.options._helper,n.placeholder&&n.placeholder.remove(),i.helper.appendTo(s._parent),s._refreshOffsets(e),i.position=s._generatePosition(e,!0),s._trigger("fromSortable",e),s.dropped=!1,t.each(s.sortables,(function(){this.refreshPositions()})))}))}}),t.ui.plugin.add("draggable","cursor",{start:function(e,i,s){var o=t("body"),n=s.options;o.css("cursor")&&(n._cursor=o.css("cursor")),o.css("cursor",n.cursor)},stop:function(e,i,s){var o=s.options;o._cursor&&t("body").css("cursor",o._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i,s){var o=t(i.helper),n=s.options;o.css("opacity")&&(n._opacity=o.css("opacity")),o.css("opacity",n.opacity)},stop:function(e,i,s){var o=s.options;o._opacity&&t(i.helper).css("opacity",o._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(e,i,s){var o=s.options,n=!1,r=s.scrollParentNotHidden[0],h=s.document[0];r!==h&&"HTML"!==r.tagName?(o.axis&&"x"===o.axis||(s.overflowOffset.top+r.offsetHeight-e.pageY<o.scrollSensitivity?r.scrollTop=n=r.scrollTop+o.scrollSpeed:e.pageY-s.overflowOffset.top<o.scrollSensitivity&&(r.scrollTop=n=r.scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(s.overflowOffset.left+r.offsetWidth-e.pageX<o.scrollSensitivity?r.scrollLeft=n=r.scrollLeft+o.scrollSpeed:e.pageX-s.overflowOffset.left<o.scrollSensitivity&&(r.scrollLeft=n=r.scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(e.pageY-t(h).scrollTop()<o.scrollSensitivity?n=t(h).scrollTop(t(h).scrollTop()-o.scrollSpeed):t(window).height()-(e.pageY-t(h).scrollTop())<o.scrollSensitivity&&(n=t(h).scrollTop(t(h).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(e.pageX-t(h).scrollLeft()<o.scrollSensitivity?n=t(h).scrollLeft(t(h).scrollLeft()-o.scrollSpeed):t(window).width()-(e.pageX-t(h).scrollLeft())<o.scrollSensitivity&&(n=t(h).scrollLeft(t(h).scrollLeft()+o.scrollSpeed)))),!1!==n&&t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(s,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,i,s){var o=s.options;s.snapElements=[],t(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each((function(){var e=t(this),i=e.offset();this!==s.element[0]&&s.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:i.top,left:i.left})}))},drag:function(e,i,s){var o,n,r,h,a,l,d,p,c,g,u=s.options,f=u.snapTolerance,m=i.offset.left,_=m+s.helperProportions.width,v=i.offset.top,b=v+s.helperProportions.height;for(c=s.snapElements.length-1;c>=0;c--)l=(a=s.snapElements[c].left-s.margins.left)+s.snapElements[c].width,p=(d=s.snapElements[c].top-s.margins.top)+s.snapElements[c].height,_<a-f||m>l+f||b<d-f||v>p+f||!t.contains(s.snapElements[c].item.ownerDocument,s.snapElements[c].item)?(s.snapElements[c].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[c].item})),s.snapElements[c].snapping=!1):("inner"!==u.snapMode&&(o=Math.abs(d-b)<=f,n=Math.abs(p-v)<=f,r=Math.abs(a-_)<=f,h=Math.abs(l-m)<=f,o&&(i.position.top=s._convertPositionTo("relative",{top:d-s.helperProportions.height,left:0}).top),n&&(i.position.top=s._convertPositionTo("relative",{top:p,left:0}).top),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:a-s.helperProportions.width}).left),h&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l}).left)),g=o||n||r||h,"outer"!==u.snapMode&&(o=Math.abs(d-v)<=f,n=Math.abs(p-b)<=f,r=Math.abs(a-m)<=f,h=Math.abs(l-_)<=f,o&&(i.position.top=s._convertPositionTo("relative",{top:d,left:0}).top),n&&(i.position.top=s._convertPositionTo("relative",{top:p-s.helperProportions.height,left:0}).top),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:a}).left),h&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l-s.helperProportions.width}).left)),!s.snapElements[c].snapping&&(o||n||r||h||g)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[c].item})),s.snapElements[c].snapping=o||n||r||h||g)}}),t.ui.plugin.add("draggable","stack",{start:function(e,i,s){var o,n=s.options,r=t.makeArray(t(n.stack)).sort((function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)}));r.length&&(o=parseInt(t(r[0]).css("zIndex"),10)||0,t(r).each((function(e){t(this).css("zIndex",o+e)})),this.css("zIndex",o+r.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i,s){var o=t(i.helper),n=s.options;o.css("zIndex")&&(n._zIndex=o.css("zIndex")),o.css("zIndex",n.zIndex)},stop:function(e,i,s){var o=s.options;o._zIndex&&t(i.helper).css("zIndex",o._zIndex)}}),t.ui.draggable,t.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,i=this.options,s=i.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(s)?s:function(t){return t.is(s)},this.proportions=function(){if(!arguments.length)return e||(e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight});e=arguments[0]},this._addToManager(i.scope),i.addClasses&&this._addClass("ui-droppable")},_addToManager:function(e){t.ui.ddmanager.droppables[e]=t.ui.ddmanager.droppables[e]||[],t.ui.ddmanager.droppables[e].push(this)},_splice:function(t){for(var e=0;e<t.length;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var e=t.ui.ddmanager.droppables[this.options.scope];this._splice(e)},_setOption:function(e,i){if("accept"===e)this.accept=t.isFunction(i)?i:function(t){return t.is(i)};else if("scope"===e){var s=t.ui.ddmanager.droppables[this.options.scope];this._splice(s),this._addToManager(i)}this._super(e,i)},_activate:function(e){var i=t.ui.ddmanager.current;this._addActiveClass(),i&&this._trigger("activate",e,this.ui(i))},_deactivate:function(e){var i=t.ui.ddmanager.current;this._removeActiveClass(),i&&this._trigger("deactivate",e,this.ui(i))},_over:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._addHoverClass(),this._trigger("over",e,this.ui(i)))},_out:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._removeHoverClass(),this._trigger("out",e,this.ui(i)))},_drop:function(e,i){var s=i||t.ui.ddmanager.current,o=!1;return!(!s||(s.currentItem||s.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each((function(){var i=t(this).droppable("instance");if(i.options.greedy&&!i.options.disabled&&i.options.scope===s.options.scope&&i.accept.call(i.element[0],s.currentItem||s.element)&&r(s,t.extend(i,{offset:i.element.offset()}),i.options.tolerance,e))return o=!0,!1})),!o&&!!this.accept.call(this.element[0],s.currentItem||s.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",e,this.ui(s)),this.element))},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var r=t.ui.intersect=function(){function t(t,e,i){return t>=e&&t<e+i}return function(e,i,s,o){if(!i.offset)return!1;var n=(e.positionAbs||e.position.absolute).left+e.margins.left,r=(e.positionAbs||e.position.absolute).top+e.margins.top,h=n+e.helperProportions.width,a=r+e.helperProportions.height,l=i.offset.left,d=i.offset.top,p=l+i.proportions().width,c=d+i.proportions().height;switch(s){case"fit":return l<=n&&h<=p&&d<=r&&a<=c;case"intersect":return l<n+e.helperProportions.width/2&&h-e.helperProportions.width/2<p&&d<r+e.helperProportions.height/2&&a-e.helperProportions.height/2<c;case"pointer":return t(o.pageY,d,i.proportions().height)&&t(o.pageX,l,i.proportions().width);case"touch":return(r>=d&&r<=c||a>=d&&a<=c||r<d&&a>c)&&(n>=l&&n<=p||h>=l&&h<=p||n<l&&h>p);default:return!1}}}();t.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(e,i){var s,o,n=t.ui.ddmanager.droppables[e.options.scope]||[],r=i?i.type:null,h=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(s=0;s<n.length;s++)if(!(n[s].options.disabled||e&&!n[s].accept.call(n[s].element[0],e.currentItem||e.element))){for(o=0;o<h.length;o++)if(h[o]===n[s].element[0]){n[s].proportions().height=0;continue t}n[s].visible="none"!==n[s].element.css("display"),n[s].visible&&("mousedown"===r&&n[s]._activate.call(n[s],i),n[s].offset=n[s].element.offset(),n[s].proportions({width:n[s].element[0].offsetWidth,height:n[s].element[0].offsetHeight}))}},drop:function(e,i){var s=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),(function(){this.options&&(!this.options.disabled&&this.visible&&r(e,this,this.options.tolerance,i)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))})),s},dragStart:function(e,i){e.element.parentsUntil("body").on("scroll.droppable",(function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}))},drag:function(e,i){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,i),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],(function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s,o,n,h=r(e,this,this.options.tolerance,i),a=!h&&this.isover?"isout":h&&!this.isover?"isover":null;a&&(this.options.greedy&&(o=this.options.scope,(n=this.element.parents(":data(ui-droppable)").filter((function(){return t(this).droppable("instance").options.scope===o}))).length&&((s=t(n[0]).droppable("instance")).greedyChild="isover"===a)),s&&"isover"===a&&(s.isover=!1,s.isout=!0,s._out.call(s,i)),this[a]=!0,this["isout"===a?"isover":"isout"]=!1,this["isover"===a?"_over":"_out"].call(this,i),s&&"isout"===a&&(s.isout=!1,s.isover=!0,s._over.call(s,i)))}}))},dragStop:function(e,i){e.element.parentsUntil("body").off("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}},!1!==t.uiBackCompat&&t.widget("ui.droppable",t.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),t.ui.droppable,t.widget("ui.resizable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var s,o=i&&"left"===i?"scrollLeft":"scrollTop";return e[o]>0||(e[o]=1,s=e[o]>0,e[o]=0,s)},_create:function(){var e,i=this.options,s=this;this._addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,e={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(e),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(e),this._proportionallyResize()),this._setupHandles(),i.autoHide&&t(this.element).on("mouseenter",(function(){i.disabled||(s._removeClass("ui-resizable-autohide"),s._handles.show())})).on("mouseleave",(function(){i.disabled||s.resizing||(s._addClass("ui-resizable-autohide"),s._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_setOption:function(t,e){switch(this._super(t,e),t){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var e,i,s,o,n,r=this.options,h=this;if(this.handles=r.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=t(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),s=this.handles.split(","),this.handles={},i=0;i<s.length;i++)o="ui-resizable-"+(e=t.trim(s[i])),n=t("<div>"),this._addClass(n,"ui-resizable-handle "+o),n.css({zIndex:r.zIndex}),this.handles[e]=".ui-resizable-"+e,this.element.append(n);this._renderAxis=function(e){var i,s,o,n;for(i in e=e||this.element,this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=t(this.handles[i]),this._on(this.handles[i],{mousedown:h._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(s=t(this.handles[i],this.element),n=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),o=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(o,n),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",(function(){h.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),h.axis=n&&n[1]?n[1]:"se")})),r.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(e){var i,s,o=!1;for(i in this.handles)((s=t(this.handles[i])[0])===e.target||t.contains(s,e.target))&&(o=!0);return!this.options.disabled&&o},_mouseStart:function(e){var i,s,o,n=this.options,r=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),s=this._num(this.helper.css("top")),n.containment&&(i+=t(n.containment).scrollLeft()||0,s+=t(n.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:r.width(),height:r.height()},this.originalSize=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.sizeDiff={width:r.outerWidth()-r.width(),height:r.outerHeight()-r.height()},this.originalPosition={left:i,top:s},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof n.aspectRatio?n.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===o?this.axis+"-resize":o),this._addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var i,s,o=this.originalMousePosition,n=this.axis,r=e.pageX-o.left||0,h=e.pageY-o.top||0,a=this._change[n];return this._updatePrevProperties(),!!a&&(i=a.apply(this,[e,r,h]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),s=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(s)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges()),!1)},_mouseStop:function(e){this.resizing=!1;var i,s,o,n,r,h,a,l=this.options;return this._helper&&(o=(s=(i=this._proportionallyResizeElements).length&&/textarea/i.test(i[0].nodeName))&&this._hasScroll(i[0],"left")?0:this.sizeDiff.height,n=s?0:this.sizeDiff.width,r={width:this.helper.width()-n,height:this.helper.height()-o},h=parseFloat(this.element.css("left"))+(this.position.left-this.originalPosition.left)||null,a=parseFloat(this.element.css("top"))+(this.position.top-this.originalPosition.top)||null,l.animate||this.element.css(t.extend(r,{top:a,left:h})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&!l.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,i,s,o,n,r=this.options;n={minWidth:this._isNumber(r.minWidth)?r.minWidth:0,maxWidth:this._isNumber(r.maxWidth)?r.maxWidth:1/0,minHeight:this._isNumber(r.minHeight)?r.minHeight:0,maxHeight:this._isNumber(r.maxHeight)?r.maxHeight:1/0},(this._aspectRatio||t)&&(e=n.minHeight*this.aspectRatio,s=n.minWidth/this.aspectRatio,i=n.maxHeight*this.aspectRatio,o=n.maxWidth/this.aspectRatio,e>n.minWidth&&(n.minWidth=e),s>n.minHeight&&(n.minHeight=s),i<n.maxWidth&&(n.maxWidth=i),o<n.maxHeight&&(n.maxHeight=o)),this._vBoundaries=n},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,s=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===s&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===s&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,s=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,o=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,n=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,r=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,h=this.originalPosition.left+this.originalSize.width,a=this.originalPosition.top+this.originalSize.height,l=/sw|nw|w/.test(i),d=/nw|ne|n/.test(i);return n&&(t.width=e.minWidth),r&&(t.height=e.minHeight),s&&(t.width=e.maxWidth),o&&(t.height=e.maxHeight),n&&l&&(t.left=h-e.minWidth),s&&l&&(t.left=h-e.maxWidth),r&&d&&(t.top=a-e.minHeight),o&&d&&(t.top=a-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,i=[],s=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],o=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];e<4;e++)i[e]=parseFloat(s[e])||0,i[e]+=parseFloat(o[e])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,i=this.helper||this.element;e<this._proportionallyResizeElements.length;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize;return{left:this.originalPosition.left+e,width:i.width-e}},n:function(t,e,i){var s=this.originalSize;return{top:this.originalPosition.top+i,height:s.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},sw:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,s]))},ne:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},nw:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,s]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).resizable("instance"),s=i.options,o=i._proportionallyResizeElements,n=o.length&&/textarea/i.test(o[0].nodeName),r=n&&i._hasScroll(o[0],"left")?0:i.sizeDiff.height,h=n?0:i.sizeDiff.width,a={width:i.size.width-h,height:i.size.height-r},l=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,d=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(a,d&&l?{top:d,left:l}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};o&&o.length&&t(o[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,i,s,o,n,r,h,a=t(this).resizable("instance"),l=a.options,d=a.element,p=l.containment,c=p instanceof t?p.get(0):/parent/.test(p)?d.parent().get(0):p;c&&(a.containerElement=t(c),/document/.test(p)||p===document?(a.containerOffset={left:0,top:0},a.containerPosition={left:0,top:0},a.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(c),i=[],t(["Top","Right","Left","Bottom"]).each((function(t,s){i[t]=a._num(e.css("padding"+s))})),a.containerOffset=e.offset(),a.containerPosition=e.position(),a.containerSize={height:e.innerHeight()-i[3],width:e.innerWidth()-i[1]},s=a.containerOffset,o=a.containerSize.height,n=a.containerSize.width,r=a._hasScroll(c,"left")?c.scrollWidth:n,h=a._hasScroll(c)?c.scrollHeight:o,a.parentData={element:c,left:s.left,top:s.top,width:r,height:h}))},resize:function(e){var i,s,o,n,r=t(this).resizable("instance"),h=r.options,a=r.containerOffset,l=r.position,d=r._aspectRatio||e.shiftKey,p={top:0,left:0},c=r.containerElement,g=!0;c[0]!==document&&/static/.test(c.css("position"))&&(p=a),l.left<(r._helper?a.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-a.left:r.position.left-p.left),d&&(r.size.height=r.size.width/r.aspectRatio,g=!1),r.position.left=h.helper?a.left:0),l.top<(r._helper?a.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-a.top:r.position.top),d&&(r.size.width=r.size.height*r.aspectRatio,g=!1),r.position.top=r._helper?a.top:0),o=r.containerElement.get(0)===r.element.parent().get(0),n=/relative|absolute/.test(r.containerElement.css("position")),o&&n?(r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top):(r.offset.left=r.element.offset().left,r.offset.top=r.element.offset().top),i=Math.abs(r.sizeDiff.width+(r._helper?r.offset.left-p.left:r.offset.left-a.left)),s=Math.abs(r.sizeDiff.height+(r._helper?r.offset.top-p.top:r.offset.top-a.top)),i+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-i,d&&(r.size.height=r.size.width/r.aspectRatio,g=!1)),s+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-s,d&&(r.size.width=r.size.height*r.aspectRatio,g=!1)),g||(r.position.left=r.prevPosition.left,r.position.top=r.prevPosition.top,r.size.width=r.prevSize.width,r.size.height=r.prevSize.height)},stop:function(){var e=t(this).resizable("instance"),i=e.options,s=e.containerOffset,o=e.containerPosition,n=e.containerElement,r=t(e.helper),h=r.offset(),a=r.outerWidth()-e.sizeDiff.width,l=r.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(n.css("position"))&&t(this).css({left:h.left-o.left-s.left,width:a,height:l}),e._helper&&!i.animate&&/static/.test(n.css("position"))&&t(this).css({left:h.left-o.left-s.left,width:a,height:l})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).resizable("instance").options;t(e.alsoResize).each((function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseFloat(e.width()),height:parseFloat(e.height()),left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))})}))},resize:function(e,i){var s=t(this).resizable("instance"),o=s.options,n=s.originalSize,r=s.originalPosition,h={height:s.size.height-n.height||0,width:s.size.width-n.width||0,top:s.position.top-r.top||0,left:s.position.left-r.left||0};t(o.alsoResize).each((function(){var e=t(this),s=t(this).data("ui-resizable-alsoresize"),o={},n=e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(n,(function(t,e){var i=(s[e]||0)+(h[e]||0);i&&i>=0&&(o[e]=i||null)})),e.css(o)}))},stop:function(){t(this).removeData("ui-resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).resizable("instance"),i=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}),e._addClass(e.ghost,"ui-resizable-ghost"),!1!==t.uiBackCompat&&"string"==typeof e.options.ghost&&e.ghost.addClass(this.options.ghost),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e,i=t(this).resizable("instance"),s=i.options,o=i.size,n=i.originalSize,r=i.originalPosition,h=i.axis,a="number"==typeof s.grid?[s.grid,s.grid]:s.grid,l=a[0]||1,d=a[1]||1,p=Math.round((o.width-n.width)/l)*l,c=Math.round((o.height-n.height)/d)*d,g=n.width+p,u=n.height+c,f=s.maxWidth&&s.maxWidth<g,m=s.maxHeight&&s.maxHeight<u,_=s.minWidth&&s.minWidth>g,v=s.minHeight&&s.minHeight>u;s.grid=a,_&&(g+=l),v&&(u+=d),f&&(g-=l),m&&(u-=d),/^(se|s|e)$/.test(h)?(i.size.width=g,i.size.height=u):/^(ne)$/.test(h)?(i.size.width=g,i.size.height=u,i.position.top=r.top-c):/^(sw)$/.test(h)?(i.size.width=g,i.size.height=u,i.position.left=r.left-p):((u-d<=0||g-l<=0)&&(e=i._getPaddingPlusBorderDimensions(this)),u-d>0?(i.size.height=u,i.position.top=r.top-c):(u=d-e.height,i.size.height=u,i.position.top=r.top+n.height-u),g-l>0?(i.size.width=g,i.position.left=r.left-p):(g=l-e.width,i.size.width=g,i.position.left=r.left+n.width-g))}}),t.ui.resizable}(t)}).call(this,i(4))}]).GridStack}));
//# sourceMappingURL=gridstack.all.no-jquery.js.map